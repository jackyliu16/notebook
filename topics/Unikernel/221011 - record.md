## 幺内核
![[Pasted image 20221011223952.png]]

### unikraft 当前成果
![[Pasted image 20221011224052.png]]

### unikraft 设计目标
![[Pasted image 20221011224122.png]]

### unikraft 架构
![[Pasted image 20221011232109.png]]

### libos 架构
![[Pasted image 20221011233313.png]]

### rCore-Turorial-in-single-workspace 架构
![[Pasted image 20221012001639.png]]
### 我之前完成的single workspace版本
![[Pasted image 20221012001803.png]]
*注：不具有参考价值*

### 模块化内核
![[Pasted image 20221012090758.png]]在构建系统的时候遵循面向对象方法，以及模块化构建方法，这些额外的内核模块实际上只有等到需要被使用的时候才会被连接到内核中
每一个内核部分都定义了受保护的接口，可以限制访问问题
同时每一个内核部分都可以通过`core kernel`直接访问到其他的内核模块部分，这样就降低了灵活性


如果说还是尝试需要对于`rCore`进行模块化操作的话，可能相对来说还是需要更新一下思路，毕竟在当前阶段中可能实际上出现的部分相对来说新的东西还是不够多
****

我之前的想法实际上是一个基于`crate`复用的想法实现的，实际上有点类似于`unikernel`中的微库这个概念
一开始的想法其实有点像是想通过将实现一个或者类似的功能的部分做成一个`crate`，这个`crate`实际上有提供一个标准的`trait`，内部包含了一系列与之有关但是可以相互替换的模块。有点像策略模式？然后每一个章节实际上可以通过提供一个新的`trait`的实现来达成这个效果。然后各个章节之间可以通过比如说`cargo xtask`实现在各个章节之间的`crate`自动切换[2]，在内容都已经相当程度上的抽象，并且都提供了对应的空白模板[3]的时候，感觉确实具有理论上的可行性？

[1]这个地方我可能对于hypervisor的理解不是很正确，但是大体上是想要尝试以一个应用程序对于所有的样例进行管理和测试，不过这个地方还没想要需要如何实现让操作系统获悉与应用程序相关的系统调用的执行情况，可能干脆直接截取与之相关的部分，在`hypervisor`中处理？
[2]这个地方实际上是我前几天看杨工的那个`try-libos`看到的，可以通过`build.rs` 和 `xtask`实现基于参数的`crate`变化
[3]毕竟理论上教学不会出现后面章节重新利用到前面章节的内容，这个地方的空白模板实际上是因为我想将所有的章节压缩成为一个文件夹而必要的（就是说对于不同章节而言，其在main文件中的执行内容是完全相同的）